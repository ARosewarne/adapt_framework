{{!-- Allows this template access to '_globals' object in course.json --}}
{{import_globals}}

<div {{#each _attributes}}{{@key}}="{{this}}" {{/each}} class="notify__popup notify__popup-type-{{_type}}{{#if _classes}} {{_classes}}{{/if}}">

  {{{a11y_aria_label _globals._accessibility._ariaLabels.feedbackPopUp}}}

  <div class="notify__popup-inner">

    <div class="notify__content{{#if _image}} has-image{{/if}}{{#if feedbackClasses}} {{feedbackClasses}}{{/if}}">
      <div class="notify__content-inner">

        <div class="notify__icon">
          <div class="icon{{#if_value_equals _type "prompt"}} icon-question{{/if_value_equals}}{{#if_value_equals _type "alert"}} icon-warning{{/if_value_equals}}"></div>
        </div>

        {{#if title}}
          <div class="notify__title">
            <div class="notify__title-inner" tabindex="0" role="heading" aria-level="1">
              {{{compile title this}}}
            </div>
          </div>
        {{/if}}

        {{#if body}}
        <div class="notify__body">
          <div class="notify__body-inner">
            {{{compile_a11y_text body this}}}
          </div>
        </div>
        {{/if}}

        {{#if _image}}
        <div class="notify__image-container">

          {{#if imageAlt}}
          <img class="notify__image" src="{{_image}}" aria-label="{{imageAlt}}" tabindex="0">
          {{else}}
          <img class="notify__image a11y-ignore" src="{{_image}}" aria-hidden="true" tabindex="-1">
          {{/if}}

        </div>
        {{/if}}

        {{!-- {{#if _graphic.attribution}}
        <div class="notify__attribution">
          <div class="notify__attribution-inner">
            {{{_graphic.attribution}}}
          </div>
        </div>
        {{/if}} --}}

        {{#if_value_equals _type "alert"}}
        <div class="notify__btn-container">
          <button class="btn-text notify__btn notify__btn-alert js-notify-btn-alert" aria-label="{{{confirmText}}}">{{{confirmText}}}</button>
        </div>
        {{/if_value_equals}}

        {{#if_value_equals _type "prompt"}}
        <div class="notify__btn-container">
          {{#each _prompts}}
          <button class="btn-text notify__btn notify__btn-prompt js-notify-btn-prompt" data-event="{{_callbackEvent}}" aria-label="{{{promptText}}}">
            {{{promptText}}}
          </button>
          {{/each}}
        </div>
        {{/if_value_equals}}

        </div>
    </div>

    {{#if _isCancellable}}
    {{#if_value_equals _type "popup"}}
    <button class="btn-icon notify__close-btn js-notify-close-btn" aria-label="{{_globals._accessibility._ariaLabels.closePopup}}">
      <div class="icon"></div>
    </button>
    {{/if_value_equals}}
    {{/if}}

  </div>

  {{{a11y_wrap_focus}}}

</div>

<div class="notify__shadow js-notify-shadow-click"></div>
